<!DOCTYPE html>
<html><head>
    <meta charset="UTF-8">
    <title>Christopher Gandrud ℈</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="E-commerce Attribution &amp; Necessary vs. Sufficient Causation" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dazzling-roentgen-3e71e9.netlify.app/post/e-commerce-attribution-necessary-vs-sufficient-causation/" />
    <meta itemprop="name" content="E-commerce Attribution &amp; Necessary vs. Sufficient Causation">
    <meta itemprop="description" content="">
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="E-commerce Attribution &amp; Necessary vs. Sufficient Causation"/>
    <meta name="twitter:description" content=""/>

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
    <link rel="manifest" href="site.webmanifest">

    
    <link rel="stylesheet" href="https://dazzling-roentgen-3e71e9.netlify.app/scss/style.min.8e9aa19966f4b64616a6522f174e90b30f2b86701d93d1b19f57657b2592fd5c.css" >
</head>
<body>
    <header>
    <div class="header header-frame">
        <div>
          
            <div class="header__title">E-commerce Attribution &amp; Necessary vs. Sufficient Causation</div>
          
            
        </div>
        <nav class="header-nav">
            <ul class="header-nav-list header-nav-list--menu">
                
                
                    
                        <li class="header-nav-list__item">
                            <a class="header-nav-list__link" href="/about/">
                                
                                <span>About</span>
                            </a>
                        </li>
                    
                
            </ul>
            <button class="header-nav-list__nav-btn">navigation</button>
        </nav>
        <button class="mb-header__menu-btn">
            <span class="mb-header__menu-btn-line"></span>
            <span class="mb-header__menu-btn-line"></span>
            <span class="mb-header__menu-btn-line"></span>
        </button>
    </div>
    <nav id="mobile-header-nav" class="mb-header-nav">
  
  
  <button class="mb-header-nav__close-btn flex-center">
    <svg
            class="mb-header-nav__svg-icon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="32"
            height="32"
            >
            <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                />
            <path d="M0 0h24v24H0z" fill="none" />
        </svg>
    </button>
    
    <div class="mb-header-nav__wrapper">
        <div class="mb-header-nav__container">
            <svg
                width="240"
                height="72"
                viewBox="0 0 240 72"
                class="mb-header-nav__title"
                >
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">
                Tags
                </text>
            </svg>
            <ul class="mb-header-nav-list">
                
                    
                        
                          <li class="mb-header-nav-list__item ">
                        <a class="mb-header-nav-list__link" href="https://dazzling-roentgen-3e71e9.netlify.app/tags/e-commerce/"
                                                            >e-commerce</a
                                                        >
                    </li>
                        
                    
                        
                          <li class="mb-header-nav-list__item ">
                        <a class="mb-header-nav-list__link" href="https://dazzling-roentgen-3e71e9.netlify.app/tags/attribution/"
                                                            >attribution</a
                                                        >
                    </li>
                        
                    
                        
                          <li class="mb-header-nav-list__item ">
                        <a class="mb-header-nav-list__link" href="https://dazzling-roentgen-3e71e9.netlify.app/tags/causation/"
                                                            >causation</a
                                                        >
                    </li>
                        
                    
                        
                          <li class="mb-header-nav-list__item ">
                        <a class="mb-header-nav-list__link" href="https://dazzling-roentgen-3e71e9.netlify.app/tags/probability/"
                                                            >probability</a
                                                        >
                    </li>
                        
                    
                
            </ul>
        </div>
        <div class="mb-header-nav__container">
            <svg
                width="240"
                height="72"
                viewBox="0 0 240 72"
                class="mb-header-nav__title"
                >
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">
                Menu
                </text>
            </svg>
            <ul class="mb-header-nav-list">
                
                
                    
                      <li class="mb-header-nav-list__item ">
                            <a class="mb-header-nav-list__link" href="/about/">
                                About
                            </a>
                        </li>
                    
                
            </ul>
        </div>
    </div>
</nav>

</header>



    <div id="content">
<article class="post">
  
    <div class="post-content">
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="the-basic-attribution-problem" class="section level2">
<h2>The basic attribution problem</h2>
<p>The tools of causal inference–particularly the concepts of necessary and sufficient causation–are central to solving the e-commerce <strong>attribution problem</strong>. The e-commerce attribution problem is:</p>
<blockquote>
<p>how much of the value of an outcome should we ascribe to a given customer touch point out of a set of touch points that preceded the outcome?</p>
</blockquote>
<p>For example, a customer buys a t-shirt. What value should we ascribe to the multiple touch points where the customer saw and interacted with the t-shirt: Facebook ads for the t-shirt, on-site recommendations for the t-shirt, putting the t-shirt in their wishlist, putting the t-shirt in their cart, checkout out the t-shirt? The e-commerce attribution problem is a version of the “causes of effects” problem discussed by <span class="citation">Gelman and Imbens (2013)</span> and <span class="citation">Yamamoto (2012)</span>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p><em>Why is this problem important?</em> Solving the attribution problem helps us make better decisions about how to invest in developing customer touch points (e.g. Facebook marketing, on-site recommendations, etc.) that are most likely to achieve our business objectives (e.g. increase sales). We want to invest in the touch points that are most likely to cause <em>incremental</em> value.</p>
<div id="the-checkout-attribution-problem" class="section level3">
<h3>The checkout attribution problem</h3>
<p>To understand how to solve the attribution problem, let’s think about a simple concrete example: the checkout attribution problem. Imagine we are interested in attributing value to the touch points that lead to the sale of a product. There are three possible customer touch points leading to a sale: off-site advertising, on-site recommendations, and checkout. All sales must include interacting with the checkout:</p>
<center>
<img src="/post/2020-05-22-e-commerce-attribution-necessary-vs-sufficient-causation.en_files/checkout-problem.png" alt="The Checkout Problem as a DAG" width="50%"/>
</center>
<p>What value should we attribute to each of these touch points? Since all customer journeys to a sale have to go through the checkout, does this mean that we should attribute all of the value of the sale to the checkout? The answer is “no”, but to understand why we need to make a distinction between necessary and sufficient causal conditions <span class="citation">(Pearl 1999, 2018, 287–91)</span></p>
<div id="necessary-vs.-sufficient-causation" class="section level4">
<h4>Necessary vs. sufficient causation</h4>
<p>Let’s represent a sale as <span class="math inline">\(y = 1\)</span> and no sale as <span class="math inline">\(y = 0\)</span>. When a customer experiences a touch point (advertising, recommendations, checkout) then <span class="math inline">\(x_{\mathrm{ad}} = 1\)</span>, <span class="math inline">\(x_{\mathrm{reco}} = 1\)</span>, and <span class="math inline">\(x_{\mathrm{checkout}} = 1\)</span>, 0 otherwise.</p>
<p>Rather than thinking about whether a given touch point is <em>a</em> necessary or sufficient condition, let’s consider their <em>probability</em> of necessity and sufficiency.</p>
<p>The <strong>probability of necessity</strong> for a given touch point <span class="math inline">\(x\)</span> (<span class="math inline">\(\mathrm{PN}_x\)</span>) is:</p>
<p><span class="math display">\[
\mathrm{PN}_x = P(y_{x = 0} = 0| x = 1, y = 1).
\]</span></p>
<p>This expresses a counterfactual scenario. Give that the condition happened <span class="math inline">\((x = 1)\)</span> and there was a sale <span class="math inline">\((y = 1)\)</span> , what is the probability that the sale would not have happened had condition <span class="math inline">\(x\)</span> not have happened? The checkout has high probability of necessity for sale because the probability that a sale occurs without a checkout is 0. Advertising and recommendations have lower probability of necessity. A sale could still happen if a customer saw a recommendation, but not advertising and vice versa.</p>
<p>The <strong>probability of sufficiency</strong> for a given touch point <span class="math inline">\(x\)</span> (<span class="math inline">\(\mathrm{PS}_x\)</span>) is:</p>
<p><span class="math display">\[
\mathrm{PS}_x = P(y_{x = 1} = 1| x = 0, y = 0).
\]</span></p>
<p>This time the counterfactual scenario is: given that the condition <span class="math inline">\(x\)</span> did not happen and there was no sale, what is the probability that a sale would have happened had the condition happened? Checkout has a low probability of sufficiency. If a customer is only exposed to a checkout page they probably won’t purchase. Advertising and recommendations have higher sufficiency. If a customer sees either an advertisement or a recommendation for a product they are more likely to purchase.</p>
<p>In sum:</p>
<table>
<thead>
<tr class="header">
<th>Touch Point</th>
<th>PN</th>
<th>PS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Advertisement</td>
<td>0</td>
<td>Higher</td>
</tr>
<tr class="even">
<td>Recommendation</td>
<td>0</td>
<td>Higher</td>
</tr>
<tr class="odd">
<td>Checkout</td>
<td>1</td>
<td>Very Low</td>
</tr>
</tbody>
</table>
<p>So what?</p>
<p>Let’s remember the problem we are trying to solve: decide how much to invest in each touch point to increase our incremental return. Once we have already decided to invest in necessary touch points, <em>knowing a touch point’s probability of sufficiency is more important than its probability of necessity for further investment decisions</em>.</p>
</div>
<div id="implications" class="section level4">
<h4>Implications</h4>
<p>Let’s make this simple example more concrete to see the implications for decision-making. Imagine the following (completely fictional) numbers:</p>
<table>
<thead>
<tr class="header">
<th>Touch Point</th>
<th>PN</th>
<th>PS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Advertisement</td>
<td>0</td>
<td>0.1</td>
</tr>
<tr class="even">
<td>Recommendation</td>
<td>0</td>
<td>0.05</td>
</tr>
<tr class="odd">
<td>Checkout</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>We have a two step decision making process:</p>
<ol style="list-style-type: decimal">
<li><p>Decide where we <em>must</em> invest. The probability of necessity helps us make this decision. We <em>must</em> invest in the checkout or there will be no sales (<span class="math inline">\(\mathrm{PS}_{checkout} = 1\)</span>). However, we will have no sales if we only invest in a checkout <span class="math inline">\(PS_\mathrm{checkout} = 0\)</span>. So we then . . .</p></li>
<li><p>Decide where to invest to increase our incremental sales. For this we use the touch point’s probability of sufficiency. Based the probabilities in this example, we should invest twice as much in advertising than recommendations (<span class="math inline">\(\frac{\mathrm{PS}_{ad}}{\mathrm{PS}_{reco}} = 2\)</span>), assuming their marginal return on each investment is proportional to their probability of sufficiency and there is the ability and some reason to invest in both.</p></li>
</ol>
<p>How do we find these incremental probabilities? We need causal inference methods like A/B testing and quasi-experimental methods.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> We don’t need these methods for touch points with high probability of necessity. They are so obviously necessary that we wouldn’t want to do an A/B test because the consequences of turning them off would be obviously catastrophic.</p>
<p><span class="citation">Pearl (2018, 290–91)</span> argues that distinguishing between necessary and sufficient probabilities is crucial for all automated decision-making systems, including AI generally. Without it, we will not be able to build sensible decision making systems that can reason about causes.</p>
</div>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-gelman2013ask">
<p>Gelman, Andrew, and Guido Imbens. 2013. “Why Ask Why? Forward Causal Inference and Reverse Causal Questions.” National Bureau of Economic Research.</p>
</div>
<div id="ref-pearl1999probabilities">
<p>Pearl, Judea. 1999. “Probabilities of Causation: Three Counterfactual Interpretations and Their Identification.” <em>Synthese</em> 121 (1-2): 93–149.</p>
</div>
<div id="ref-Pearl2018bookofwhy">
<p>———. 2018. <em>The Book of Why: The New Science of Cause and Effect</em>. New York: Basic Books.</p>
</div>
<div id="ref-yamamoto2012understanding">
<p>Yamamoto, Teppei. 2012. “Understanding the Past: Statistical Analysis of Causal Attribution.” <em>American Journal of Political Science</em> 56 (1): 237–56.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>A <em>causes of effects</em> question–is something like: why did a customer buy this? This is in contrast to what we looked at earlier in the chapter <em>effects of causes</em> questions. An example effects of causes question is: what if we advertise more?<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><span class="citation">Gelman and Imbens (2013)</span> argue that “we ask reverse causal questions [necessary and sufficient causal questions] all the time, but we do not perform reverse causal inference . . . “Why” questions motivate “What if” questions that can be studied using standard statistical tools such as experiments, observational studies, and structural equation models . . . once the question has been framed in terms of the effect of a specific variable, its resolution is conducted within the realm of forward causal reasoning" (2).<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
</div>
  
</article>
<button class="floating-button">
    <a class="floating-button__link" href="https://dazzling-roentgen-3e71e9.netlify.app/">
        <span>home</span>
    </a>
</button>


    </div>
    
    <footer class="post-footer">
    <div class="footer">
        <script src="//yihui.org/js/math-code.js"></script>
<script async
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
        
            <div>© 2020, Christopher Gandrud</div>
        
        <div class="footer__socials">



<a
  href="https://twitter.com/ChrisGandrud"
  target="_blank"
  class="social-link"
  title="Twitter link"
  rel="noopener"
  aria-label="follow on Twitter——Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm18.862 9.237c.208 4.617-3.235 9.765-9.33 9.765-1.854 0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.079-4.03 3.198-4.03.944 0 1.797.398 2.396 1.037.748-.147 1.451-.42 2.085-.796-.245.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.44.656-.997 1.234-1.638 1.697z"/></svg>
</a>




<a
  href="https://www.linkedin.com/in/christopher-gandrud-2b632936/"
  target="_blank"
  class="social-link"
  title="LinkedIn link"
  rel="noopener"
  aria-label="follow on LinkedIn——Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm8 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.397-2.586 7-2.777 7 2.476v6.759z"/></svg>
</a>


<a
  href="https://github.com/christophergandrud"
  target="_blank"
  class="social-link"
  title="Github link"
  rel="noopener"
  aria-label="follow on Github——Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm14.534 19.59c-.406.078-.534-.171-.534-.384v-2.195c0-.747-.262-1.233-.55-1.481 1.782-.198 3.654-.875 3.654-3.947 0-.874-.311-1.588-.824-2.147.083-.202.357-1.016-.079-2.117 0 0-.671-.215-2.198.82-.639-.18-1.323-.267-2.003-.271-.68.003-1.364.091-2.003.269-1.528-1.035-2.2-.82-2.2-.82-.434 1.102-.16 1.915-.077 2.118-.512.56-.824 1.273-.824 2.147 0 3.064 1.867 3.751 3.645 3.954-.229.2-.436.552-.508 1.07-.457.204-1.614.557-2.328-.666 0 0-.423-.768-1.227-.825 0 0-.78-.01-.055.487 0 0 .525.246.889 1.17 0 0 .463 1.428 2.688.944v1.489c0 .211-.129.459-.528.385-3.18-1.057-5.472-4.056-5.472-7.59 0-4.419 3.582-8 8-8s8 3.581 8 8c0 3.533-2.289 6.531-5.466 7.59z"/></svg>
</a>




</div>
    </div>
</footer>

    
    
      
<script src="https://dazzling-roentgen-3e71e9.netlify.app/js/script.js"></script>

    
  </body>
</html>
